# Rの基礎 {#basic}


## 四則演算


```r
# 足し算
1 + 2
```

```
## [1] 3
```

```r
# 引き算
1 - 2
```

```
## [1] -1
```

```r
# 掛け算
1 * 2
```

```
## [1] 2
```

```r
# 割り算
1 / 2
```

```
## [1] 0.5
```


## ベクトル

数値や文字列を並べたものをここではベクトルとよぶ．社会調査では個人の特徴である変数の具体的な中身がベクトルとなる．ベクトルは `c()` （cはcombine あるいはconcatenate）と`,`（カンマ）使うことで作成できる．`c()`は値だけではなく，ベクトルをつなぎ合わせることもできる．またベクトルを作成する上で便利な関数（次のセクションを参照）が存在する．連続した数のベクトルを生成する`:`や`seq`関数そして数値を繰り返してベクトルを生成する`rep`関数は覚えたほうが良いだろう．

## 数値のベクトル


```r
# 1 3 6 という数値の列
c(1,3,6)
```

```
## [1] 1 3 6
```

```r
# 1から5まで，1ずつ増加する数値の列
c(1,2,3,4,5)
```

```
## [1] 1 2 3 4 5
```

```r
# seq関数を用いることもできる
seq(from = 1, to = 5, by = 1)
```

```
## [1] 1 2 3 4 5
```

```r
# 慣れれば省略して表記することも可能
seq(1,5,1)
```

```
## [1] 1 2 3 4 5
```

```r
# もっとシンプルな方法
1:5
```

```
## [1] 1 2 3 4 5
```


```r
# 2000から2020まで3ずつ増える
seq(from = 2000, to = 2020, by = 3)
```

```
## [1] 2000 2003 2006 2009 2012 2015 2018
```

```r
# 1が4つならんだ数値の列
c(1,1,1,1)
```

```
## [1] 1 1 1 1
```

```r
# rep関数を用いることも可能
rep(1, times = 4)
```

```
## [1] 1 1 1 1
```

```r
# 慣れれば省略して表記することも可能
rep(1,4)
```

```
## [1] 1 1 1 1
```

```r
# 1を6回，2を4回繰り返す
rep(c(1,2), times = c(6,4))
```

```
##  [1] 1 1 1 1 1 1 2 2 2 2
```


なお，結果の一番左に`[1]`とあるが，これはその行の1番左の数が何番目の要素であるのかを示している．値が1つであっても表示される．ベクトルが大きくなった場合に役立つ．

## 文字列のベクトル


```r
# アルファベット
letters[1:10]
```

```
##  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
```

```r
LETTERS[1:10]
```

```
##  [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J"
```

```r
# 文字を使用する場合は""を使う
c("A","O","AB","B")
```

```
## [1] "A"  "O"  "AB" "B"
```

```r
# PPAP
c("Pen","Pineapple","Apple","Pen")
```

```
## [1] "Pen"       "Pineapple" "Apple"     "Pen"
```

```r
# 男性10人，女性20人
c(rep("Men", 10), rep("Women", 20))
```

```
##  [1] "Men"   "Men"   "Men"   "Men"   "Men"   "Men"   "Men"   "Men"   "Men"  
## [10] "Men"   "Women" "Women" "Women" "Women" "Women" "Women" "Women" "Women"
## [19] "Women" "Women" "Women" "Women" "Women" "Women" "Women" "Women" "Women"
## [28] "Women" "Women" "Women"
```

```r
rep(c("Men","Women"), times = c(10,20))
```

```
##  [1] "Men"   "Men"   "Men"   "Men"   "Men"   "Men"   "Men"   "Men"   "Men"  
## [10] "Men"   "Women" "Women" "Women" "Women" "Women" "Women" "Women" "Women"
## [19] "Women" "Women" "Women" "Women" "Women" "Women" "Women" "Women" "Women"
## [28] "Women" "Women" "Women"
```


## オブジェクト

スカラー，ベクトル，データ（後ほど説明）などは，オブジェクトとして扱うことができる．


```r
# aというオブジェクトに12を格納（入れるだけなので結果は出ない）
a <- 12

# aを呼び出し，確認
a
```

```
## [1] 12
```

```r
# 以上の作業をまとめて行うためには()を用いる
(a <- 12)
```

```
## [1] 12
```

```r
# bというオブジェクトに1:5を格納
b <- 1:5
```


オブジェクトを用いて計算なども可能である．


```r
# aとbを足してみる
a + b 
```

```
## [1] 13 14 15 16 17
```

```r
# aとbをかけてみる
a * b 
```

```
## [1] 12 24 36 48 60
```



## 関数

オブジェクトに対して関数を適用する．


```r
a <- 5 

# 平方根
sqrt(a)
```

```
## [1] 2.236068
```

```r
# 自然対数
log(a)
```

```
## [1] 1.609438
```

```r
# 底が2の対数
log(a, base = 2)
```

```
## [1] 2.321928
```


```r
# 常用対数
log(a, base = 10)
```

```
## [1] 0.69897
```

```r
log10(a)
```

```
## [1] 0.69897
```

```r
# 指数関数
exp(a)
```

```
## [1] 148.4132
```

```r
# 絶対値
abs(-1*a)
```

```
## [1] 5
```


```r
x <- 1:10

# 合計
sum(x)
```

```
## [1] 55
```

```r
# データの数
length(x)
```

```
## [1] 10
```

```r
# 平均値
mean(x)
```

```
## [1] 5.5
```

```r
# 平均値（関数の組み合わせ）
sum(x) / length(x)
```

```
## [1] 5.5
```

```r
# 中央値
median(x)
```

```
## [1] 5.5
```



## データフレイム


```r
x <- c(1,3,5,7,9,2,4,6,8,10)
y <- c(-1,4,5,7,3,4,8,0,1,-3)
z <- letters[1:10]
x
```

```
##  [1]  1  3  5  7  9  2  4  6  8 10
```

```r
y
```

```
##  [1] -1  4  5  7  3  4  8  0  1 -3
```

```r
z
```

```
##  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
```


### データフレイム


```r
df <- data.frame(x,y,z)
df
```

```
##     x  y z
## 1   1 -1 a
## 2   3  4 b
## 3   5  5 c
## 4   7  7 d
## 5   9  3 e
## 6   2  4 f
## 7   4  8 g
## 8   6  0 h
## 9   8  1 i
## 10 10 -3 j
```


### tibble形式のデータフレイム

基本的にはこちらのtibble形式のデータフレイムを用いて，データの処理や分析を行う．もしデータフレイムの読み込みでエラーが出る場合（たとえば多重代入法で用いる`amelia`など），通常のデータフレイムに`data.frame(df_tbl)`といった操作で変換すればうまくいく場合がある．


```r
library(tidyverse)
```

```
## ─ Attaching packages ──────────────────── tidyverse 1.3.1 ─
```

```
## ✓ tibble  3.1.4     ✓ dplyr   1.0.7
## ✓ tidyr   1.1.3     ✓ stringr 1.4.0
## ✓ readr   2.0.1     ✓ forcats 0.5.1
## ✓ purrr   0.3.4
```

```
## ─ Conflicts ───────────────────── tidyverse_conflicts() ─
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
```

```r
df_tbl <- tibble(df)
df_tbl
```

```
## # A tibble: 10 × 3
##        x     y z    
##    <dbl> <dbl> <chr>
##  1     1    -1 a    
##  2     3     4 b    
##  3     5     5 c    
##  4     7     7 d    
##  5     9     3 e    
##  6     2     4 f    
##  7     4     8 g    
##  8     6     0 h    
##  9     8     1 i    
## 10    10    -3 j
```



## ヘルプを活用する


```r
?seq
```

`example()`を使えば，ヘルプのExamplesにあるコードが実行される．



```r
example(seq)
```

```
## 
## seq> seq(0, 1, length.out = 11)
##  [1] 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0
## 
## seq> seq(stats::rnorm(20)) # effectively 'along'
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
## 
## seq> seq(1, 9, by = 2)     # matches 'end'
## [1] 1 3 5 7 9
## 
## seq> seq(1, 9, by = pi)    # stays below 'end'
## [1] 1.000000 4.141593 7.283185
## 
## seq> seq(1, 6, by = 3)
## [1] 1 4
## 
## seq> seq(1.575, 5.125, by = 0.05)
##  [1] 1.575 1.625 1.675 1.725 1.775 1.825 1.875 1.925 1.975 2.025 2.075 2.125
## [13] 2.175 2.225 2.275 2.325 2.375 2.425 2.475 2.525 2.575 2.625 2.675 2.725
## [25] 2.775 2.825 2.875 2.925 2.975 3.025 3.075 3.125 3.175 3.225 3.275 3.325
## [37] 3.375 3.425 3.475 3.525 3.575 3.625 3.675 3.725 3.775 3.825 3.875 3.925
## [49] 3.975 4.025 4.075 4.125 4.175 4.225 4.275 4.325 4.375 4.425 4.475 4.525
## [61] 4.575 4.625 4.675 4.725 4.775 4.825 4.875 4.925 4.975 5.025 5.075 5.125
## 
## seq> seq(17) # same as 1:17, or even better seq_len(17)
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17
```




